"use strict";var WeatherApp=angular.module("WeatherApp",[]);WeatherApp.value("yahooUrl","https://query.yahooapis.com/v1/public/yql?q=select * from weather.forecast where woeid in (select woeid from geo.places(1) where text='%s') and u='c'&format=json"),WeatherApp.factory("weatherServiceFactory",["$http","$templateCache","yahooUrl",function(a,b,c){var d={};return d.showWeather=function(a){if("data"in a)if(a.data.query.count>0){var b=a.data.query.results.channel;d.location=b.location,d.forecast=b.item.forecast.slice(0,5),d.unit=b.units.temperature,d.hasState="has-success"}else d.hasState="has-warning",d.message="No results found!";else d.hasState="has-warning",d.message="Invalid request!";d.showLoader=!1},d.showError=function(a){d.hasState="has-warning",d.message="Occurred a error with Yahoo search. Try again later.",d.showLoader=!1},d.getYahooUrl=function(){return c.replace("%s",d.city)},d.search=function(){return""==d.city||void 0==d.city?(d.hasState="has-warning",void(d.message="Please provide a location")):(d.showLoader=!0,void a.get(d.getYahooUrl(),{cache:b}).then(d.showWeather,d.showError))},d.city="Porto, PT",d.location={},d.forecast=[],d.unit="",d.hasState="",d.message="",d.showLoader=!1,d}]),WeatherApp.filter("temp",["$filter",function(a){return function(b,c){c||(c="C");var d=a("number");return d(b,1)+"\xb0"+c}}]),WeatherApp.controller("WeatherCtrl",["$scope","weatherServiceFactory","$http","$templateCache",function(a,b,c,d){a.weather=b}]),WeatherApp.directive("weatherIcon",function(){return{restrict:"E",replace:!0,scope:{code:"@"},controller:["$scope",function(a){a.setWeatherIcon=function(a){var b="";switch(a){case"0":case"2":b="wi-tornado";break;case"1":case"14":case"40":b="wi-storm-showers";break;case"3":case"4":case"37":case"38":case"39":case"47":b="wi-thunderstorm";break;case"5":case"13":case"15":case"16":case"41":case"42":case"43":case"46":b="wi-snow";break;case"6":case"7":case"8":case"9":b="wi-sprinkle";break;case"10":case"17":case"18":case"35":b="wi-hail";break;case"11":case"12":b="wi-showers";break;case"23":case"19":b="wi-cloudy-gusts";break;case"20":case"21":case"22":b="wi-fog";break;case"24":b="wi-cloudy-windy";break;case"25":b="wi-thermometer";break;case"26":b="wi-cloudy";break;case"27":b="wi-night-cloudy";break;case"28":b="wi-day-cloudy";break;case"29":b="wi-night-cloudy";break;case"30":b="wi-day-cloudy";break;case"31":b="wi-night-clear";break;case"32":b="wi-day-sunny";break;case"33":b="wi-night-clear";break;case"34":b="wi-day-sunny-overcast";break;case"36":b="wi-day-sunny";break;case"44":b="wi-cloudy";break;case"45":b="wi-lightning";break;default:b="wi-cloud"}return b},a.icon=function(){return a.setWeatherIcon(a.code)}}],template:'<div><i class="wi {{ icon() }}"></i><div>'}});
